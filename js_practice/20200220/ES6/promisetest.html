<!DOCTYPE HTML>
<html>
<head>
<!--
<script src="promise2.js" charset="utf8"></script>
-->
<script type="text/javascript">
	//alert(Promise.resolve);
	/*
	let p = new Promise(function(resolve, reject) {
		setTimeout(function() {
			console.log("promise done!");
			resolve("response data");
			reject("error occurred!!!");
		}, 1000);
	});
	
	p.then(function(data) {
		console.log(data);
		return new Promise(function(resolve, reject) {
			setTimeout(function() {
				console.log("promise2 done!");
				//resolve("response data2");
				reject("aaaaa");
				//console.log(noData);
			}, 2000);
		});
	}).then(function(data) {
		console.log(data);
	}, {});
	
	//p.then(function(data) {
	//	console.log(data);
	//}).catch(function(reason) {
	//	console.log(reason);
	//});
	
	//Promise.race();
	
	//function f(a, b, c) {
	//	alert(this);
	//	alert(a);
	//	alert(b);
	//	alert(c);
	//}
	
	//f.apply("aa", [1, 2]);
	
	//alert(window.Promise);
	
	//alert([1].concat(3).length);
	//alert(window.module);
	
	let p1 = Promise.resolve(20);
	p1.then((data) => {
		console.log(data);
	});


	let p2 = Promise.resolve({
		then: function(resolve, reject) {
			resolve(30);
		}
	});

	p2.then((data)=> {
		console.log(data)
	});

	let p3 = Promise.resolve(new Promise((resolve, reject) => {
		resolve(400)
	}));
	p3.then((data) => {
		console.log(data)
	});
	//alert(p3.finally);
	
	p3.then(function() {
		return new Promise(function(resolve, reject) {
			resolve("abc");
		});
	}).finally(function() {
		return {
			then : function(resolve, reject) {
				resolve("");
				console.log("finally");
			}
		};
	}).then(function(data) {
		return new Promise(function(resolve, reject) {
			resolve(data + "def");
		});
	}).then((data) => {
		console.log(data)
	});
	*/
	
	Promise.race([new Promise((resolve, reject) => {
		setTimeout(() => {
			resolve("abc");
		}, 100);
	}), new Promise((resolve, reject) => {
		setTimeout(() => {
			//resolve("gh456");
			reject("error!");
		}, 200);
	}), new Promise((resolve, reject) => {
		setTimeout(() => {
			resolve("asfdsd");
		}, 300);
	})]).then(data => {
		console.log(data);
	}, reason => {
		console.log(reason);
	});
	
	/*
	let p1 = new Promise((resolve, reject) => {
	  setTimeout(() => {
		resolve('成功了')
	  }, 2000);
	})

	let p2 = new Promise((resolve, reject) => {
	  setTimeout(() => {
		resolve('success')    
	  }, 5000);
	})


	Promise.race([p1, p2]).then((result) => {
	  console.log(result)               //['成功了', 'success']
	}).catch((error) => {
	  console.log(error)
	})
	*/
</script>
</head>
<body>
</body>
</html>
